# Руководство по деплою проекта на GitHub

Этот документ содержит инструкции по автоматизированному деплою проекта КолорКрафт на GitHub и управлению будущими обновлениями.

## Автоматизированный деплой

Для автоматизации процесса деплоя проекта на GitHub мы предоставляем два способа:

### Способ 1: Использование npm-скрипта (рекомендуется)

1. Откройте терминал в корневой директории проекта
2. Выполните команду:
   \`\`\`bash
   npm run deploy
   \`\`\`
3. Следуйте инструкциям в интерактивном режиме

### Способ 2: Использование bash-скрипта

1. Откройте терминал в корневой директории проекта
2. Выполните команду:
   \`\`\`bash
   ./deploy.sh
   \`\`\`
3. Следуйте инструкциям в интерактивном режиме

## Ручной деплой

Если автоматизированный деплой не работает, вы можете выполнить следующие шаги вручную:

1. Инициализируйте Git в проекте (если еще не инициализирован):
   \`\`\`bash
   git init
   \`\`\`

2. Добавьте все файлы в индекс Git:
   \`\`\`bash
   git add .
   \`\`\`

3. Создайте коммит:
   \`\`\`bash
   git commit -m "Initial commit"
   \`\`\`

4. Создайте новый репозиторий на GitHub через веб-интерфейс:
   - Перейдите на [github.com](https://github.com)
   - Нажмите на "+" в правом верхнем углу и выберите "New repository"
   - Введите имя репозитория, например, "colorcraft-ecommerce"
   - Выберите "Public" или "Private" в зависимости от ваших предпочтений
   - Нажмите "Create repository"

5. Добавьте удаленный репозиторий:
   \`\`\`bash
   git remote add origin https://github.com/ваше-имя-пользователя/colorcraft-ecommerce.git
   \`\`\`

6. Отправьте код в удаленный репозиторий:
   \`\`\`bash
   git push -u origin main
   \`\`\`
   Примечание: Если ваша основная ветка называется "master", а не "main", используйте:
   \`\`\`bash
   git push -u origin master
   \`\`\`

## Управление будущими обновлениями

После первоначального деплоя, для отправки обновлений в репозиторий:

1. Внесите изменения в код

2. Добавьте изменения в индекс Git:
   \`\`\`bash
   git add .
   \`\`\`

3. Создайте коммит:
   \`\`\`bash
   git commit -m "Описание изменений"
   \`\`\`

4. Отправьте изменения в удаленный репозиторий:
   \`\`\`bash
   git push
   \`\`\`

Для автоматизации этого процесса вы можете использовать скрипт деплоя снова:
\`\`\`bash
npm run deploy
\`\`\`

## Настройка GitHub Pages (опционально)

Для деплоя проекта на GitHub Pages:

1. Установите пакет gh-pages:
   \`\`\`bash
   npm install --save-dev gh-pages
   \`\`\`

2. Добавьте скрипты в package.json:
   \`\`\`json
   "scripts": {
     "build": "next build",
     "export": "next export",
     "deploy-pages": "next build && next export && touch out/.nojekyll && gh-pages -d out"
   }
   \`\`\`

3. Создайте файл next.config.js (если его еще нет):
   \`\`\`javascript
   /** @type {import('next').NextConfig} */
   const nextConfig = {
     output: 'export',
     basePath: '/colorcraft-ecommerce',
     images: {
       unoptimized: true,
     },
   }
   
   module.exports = nextConfig
   \`\`\`

4. Выполните деплой на GitHub Pages:
   \`\`\`bash
   npm run deploy-pages
   \`\`\`

5. Настройте GitHub Pages в настройках репозитория:
   - Перейдите в настройки репозитория на GitHub
   - Прокрутите вниз до раздела "GitHub Pages"
   - В качестве источника выберите ветку "gh-pages"
   - Нажмите "Save"

## Устранение неполадок

### Ошибка "Permission denied (publickey)"

Если вы получаете ошибку "Permission denied (publickey)" при попытке отправить код в репозиторий, это означает, что у вас не настроен SSH-ключ для GitHub. Выполните следующие шаги:

1. Сгенерируйте SSH-ключ:
   \`\`\`bash
   ssh-keygen -t ed25519 -C "ваш_email@example.com"
   \`\`\`

2. Добавьте ключ в SSH-агент:
   \`\`\`bash
   eval "$(ssh-agent -s)"
   ssh-add ~/.ssh/id_ed25519
   \`\`\`

3. Добавьте публичный ключ в настройки GitHub:
   - Скопируйте содержимое файла ~/.ssh/id_ed25519.pub
   - Перейдите на GitHub в Settings > SSH and GPG keys
   - Нажмите "New SSH key" и вставьте скопированный ключ

### Ошибка "Updates were rejected because the remote contains work that you do not have locally"

Если вы получаете эту ошибку, это означает, что в удаленном репозитории есть изменения, которых нет в вашем локальном репозитории. Выполните следующие шаги:

1. Получите изменения из удаленного репозитория:
   \`\`\`bash
   git pull --rebase origin main
   \`\`\`

2. Разрешите конфликты, если они возникнут

3. Отправьте изменения снова:
   \`\`\`bash
   git push
   \`\`\`

## Дополнительная информация

Для получения дополнительной информации о работе с Git и GitHub, обратитесь к следующим ресурсам:

- [Документация Git](https://git-scm.com/doc)
- [Руководство по GitHub](https://docs.github.com/en)
- [GitHub CLI](https://cli.github.com/manual/)
